src directory - README
======================

This directory is the root of the IVLE web application proper. It is this
directory that should be installed into the web server to be executed.
Navigating to the place this directory is installed shall be the entrypoint
into the application.

Note that no files placed in this directory or its subdirectories will be
directly visible from the web, *except* those files placed in `/media` or its
subdirectories.

Apache configuration
--------------------

IVLE should be installed into a place on the file system, and then there
should be a symlink created from Apache. Apache should symlink its IVLE
directory to the "www" directory, a subdirectory of the IVLE trunk.

The Apache conf file should have the following directives added to it, which
configures the site to direct all URLs to the main dispatcher (except for
files in the /media directory).

    # IVLE directory configuration
    # See src/README for instructions and explanation
    <Directory "/ivle-directory"> 
        SetHandler mod_python
        PythonHandler dispatch
        #PythonDebug On
        Options FollowSymLinks
        PythonOption mod_python.file_session.database_directory /path/to/shared/sessions
    </Directory>
    <Directory "/ivle-directory/media"> 
        SetHandler None
    </Directory>

Where `ivle-directory` is the path to root directory of IVLE on the web
server (the symlink which points to "www").

Uncomment `PythonDebug On` to turn on debugging.

Note that this disables directory listings across the whole site (which
essentially only affects the /media directory).

Python Site configuration
-------------------------

The setup install script automatically configures ivle.pth in the Python site
packages directory. This section is for if you run into trouble.

You need to set up IVLE as a Python site to allow importing of IVLE modules.
If this step is done improperly, you will see "ImportError: No module named
dispatch".

Place a file in the Python site packages directory
(ie. /usr/lib/python2.5/site-packages) called "ivle.pth". In it place a
single line containing the full path to the "www" directory inside
trunk in the installed location.

See http://docs.python.org/lib/module-site.html for information about
configuring .pth files.

Application configuration
-------------------------

Additional settings must be written to allow IVLE to work (such as the root
URL and student file space directories). The web application will throw an
exception if these have not been set up (if conf/conf.py does not exist).

Run setup.py, a command-line tool, which will interactively create
conf/conf.py for you.

Special handling of media directory
-----------------------------------

One important exception: Apache must be configured so that the `/media`
directory and its subdirectories are served directly as-is, with no special
handling.

Files in the `/media` directory should be served with the standard MIME types
(eg. text/html for .html, image/png for .png). **No** server-side script
handling should take place in the media directory. That is, .py and .php files
should be simply served up as text/plain or whatever their default MIME type
is.

This simply means that the web server should NOT be configured to handle
scripts anywhere in the ivle directory, except for the above handling code.

Subdirectories
--------------

* /apps - Each plugin application has its own directory.
* /dispatch - Handler module for the top-level dispatch.
* /media - Contains files directly served by Apache (see above).
* /conf - Administrator configuration files (see /conf/README).
