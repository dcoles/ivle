<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/">
  <head>
    <title>Subjects</title>
  </head>
  <body>
    <py:def function="offering_url(offering)">/subjects/${offering.subject.short_name}/${offering.semester.year}/${offering.semester.semester}</py:def>
    <h1>Subjects</h1>
    <div id="ivle_padding">
      <p py:if="len(semesters) == 0">You are not currently enrolled in any subjects.</p>
      <py:for each="(semester, enrolments) in semesters">
        <py:choose test="semester.state">
          <h2 py:when="u'current'">${semester.year}, semester ${semester.semester}</h2>
          <h3 py:otherwise="">${semester.year}, semester ${semester.semester}</h3>
        </py:choose>
        <ul>
          <py:for each="enrolment in enrolments">
            <li>
              <a href="${offering_url(enrolment.offering)}/+worksheets">${enrolment.offering.subject.name}</a>
              <py:if test="'edit' in enrolment.offering.get_permissions(user)">
                -
                <a href="${offering_url(enrolment.offering)}/+groups">(administer groups)</a>
                <a href="${offering_url(enrolment.offering)}/+enrolments/+new">(enrol users)</a>
              </py:if>
            </li>
          </py:for>
        </ul>
      </py:for>
    </div>
  </body>
</html>
